<!DOCTYPE html>
<html>

<head>
  <title>Simple Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/images/favicon.ico" type="image/png">
  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
    }
  </script>
</head>
<style>
  #op {
    display: flex;

  }

  #main {
    background-color: grey;
    padding: 5px;
  }


  #data {
    display: flex;
    margin-top: 10px;
    margin-bottom: 10px;
  }

  #num1,
  #num2 {
    display: block;
    width: 45%;
    font-size: 1.5rem;
    text-align: center;
    padding: 0;
    margin: 0;
  }

  #sign {
    display: block;
    width: 10%;
    height: 40px;
    font-size: 1.5rem;
    text-align: center;

  }

  #in span {
    display: block;
    width: 80px;
    height: 40px;
    font-size: 1.5rem;
  }

  #op button {
    width: 20%;
    height: 40px;
    font-size: 1.5rem;
    margin: 1px;
    text-align: center;

  }

  #res-section {
    position: relative
  }

  #res {
    width: 100%;
    display: inline-block;
    height: 40px;
    font-size: 2rem;
    text-align: center;
    margin-top: 10px;
    background-color: darkGrey;

  }

  #his {
    position: absolute;
    top: 12px;
    right: 0;
    width: 60px;
    height: 70%;
    font-size: x-large;
    background-color: yellow;
    font-weight: bold;
  }

  .title {
    text-align: center;
    background-color: grey;
    font-size: 1.5rem;
    color: #ffaa00;
  }

  .title::first-letter {
    font-weight: bold;
    font-size: 1.5rem;
  }

  #cl {
    background-color: red;
    color: white;
  }

  .sign {
    background-color: yellow;
  }

  .popup {
    top: 10vh;
    left: 25vw;
    position: fixed;
    display: none;
    width: 50vw;
    height: 60vw;
    z-index: 100;
    background-color: blue;
    color: white;
    padding: 20px;
    opacity: 0.8;
    border: 2px white solid;
    border-radius: 50px;
  }

  .like {
    display: inline-block;
    transform: rotate(-90deg);
    color: grey;
    font-weight: bold;

  }

  .popup button {
    position: absolute;
    z-index: 101;
    color: red;
    background-color: white;
    padding: 5px;
    margin: 5px;
    font-weight: bold;
    top: 2px;
    right: 2px;

  }
</style>

<body>
  <div id="main">
    <div class="title">SIMPLE CALCULATOR</div>
    <form id="form">
      <div id="data">
        <input id="num1" type="number" required autofocus placeholder="Value 1 " />
        <input type="text" id="sign" disabled value="+" />
        <input id="num2" type="number" required placeholder="Value 2" />
      </div>
      <div id="op">
        <button id="plus">+</button>
        <button id="minus">-</button>
        <button id="mul">x</button>
        <button id="div">/</button>
        <button type="reset" id="cl">AC</button>
      </div>
      <div id="res-section">
        <input id="res" disabled>
        <input id="his" type="button" value="&#8635">
      </div>
    </form>
  </div>

  <div class="popup">

    <p>Upvote <span class="like"> > </span> if you like </p>
    <p>Write a commit what you didn't like and what you liked.</p>
    <p>Thanks...</p>

    <button id="close">X</button>

  </div>
  <script>
    // AVI G
    num2.addEventListener("input", changeInputHandler)
    num1.addEventListener("input", changeInputHandler)
    /*
    
    
    */
    /*
   //displae massage to vote
   setTimeout(()=>{
       document.querySelector(".popup").style.display="block";
       //time out to hide message;
       setTimeout(()=>{    
      document.querySelector(".popup").style.display="none";
   }, 5000)
       
   }, 20000)
   
   */

    //attach event

    document.querySelector("#close").addEventListener("click", () => {
      document.querySelector(".popup").style.display = "none";
    })

    let signSec = document.querySelector("#sign");
    let form = document.querySelector("#form");

    form.addEventListener("submit", fn);

    form.addEventListener("reset", () => {
      document.querySelector("#num1").focus();
      if (prev) {
        prev.style.color = "black";
      }
    })

    let prev = null;


    //toggle bactive 
    function toogleActive(el) {
      if (prev) {
        prev.style.color = "black";
      }
      el.style.color = "red";
      prev = el;

    }

    function changeInputHandler() {
      let sign = document.querySelector("#sign").value;
      let result = document.querySelector("#res");

      if (sign == "+") {
        result.value = Number(num1.value) + Number(num2.value);

      }

      if (sign == "-") {
        result.value = Number(num1.value) - Number(num2.value);

      }

      if (sign == "x") {
        result.value = Number(num1.value) * Number(num2.value);
      }

      if (sign == "/") {
        result.value = Number(num1.value) / Number(num2.value);
      }
    }

    function insertResult() {
      document.querySelector("#num1").value = document.querySelector("#res").value;
      document.querySelector("#num2").value = "";
      document.querySelector("#num2").focus();

    }
    //addEventListener
    document.querySelector("#his").addEventListener("click", insertResult);


    function fn(event) {
      event.preventDefault();
      let num1 = document.querySelector("#num1");
      let num2 = document.querySelector("#num2");
      let sign = document.activeElement;
      let result = document.querySelector("#res");
      signSec.value = sign.innerHTML;


      toogleActive(sign);

      sign = sign.innerHTML;
      if (sign == "+") {
        result.value = Number(num1.value) + Number(num2.value);

      }

      if (sign == "-") {
        result.value = Number(num1.value) - Number(num2.value);

      }

      if (sign == "x") {
        result.value = Number(num1.value) * Number(num2.value);
      }

      if (sign == "/") {
        result.value = Number(num1.value) / Number(num2.value);
      }

    }

  </script>
</body>

</html>